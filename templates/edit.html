{% extends "layout.html" %} {% block content %}

<div class="row title txt">Edit information for {{ skater.name }}</div>

<div class="row txt">
  <div class="col-md-6 base form">
    <div class="row title subtitle txt">Required information</div>
    <div class="row input-field">
      <label for="name">Name:</label>
    </div>
    <div class="row input-field">
      <input type="text" id="name" name="name" value="{{ skater.name }}" />
      <div id="name-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="image">Image URL:</label>
    </div>
    <div class="row input-field">
      <input type="text" id="image" name="image" value="{{ skater.image }}" />
      <div id="image-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="country">Country:</label>
    </div>
    <div class="row input-field">
      <input
        type="text"
        id="country"
        name="country"
        value="{{ skater.country }}"
      />
      <div id="country-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="discipline">Discipline:</label>
    </div>
    <div class="row input-field">
      <input
        type="text"
        id="discipline"
        name="discipline"
        value="{{ skater.discipline }}"
      />
      <div id="discipline-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="coach">Coach:</label>
    </div>
    <div class="row input-field">
      <input type="text" id="coach" name="coach" value="{{ skater.coach }}" />
      <div id="coach-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="began_skating">Began Skating (year):</label>
    </div>
    <div class="row input-field">
      <input
        type="number"
        id="began_skating"
        name="began_skating"
        value="{{ skater.began_skating }}"
      />
      <div id="began-skating-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="age">Age:</label>
    </div>
    <div class="row input-field">
      <input type="number" id="age" name="age" value="{{ skater.age }}" />
      <div id="age-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label> Birthday:</label>
    </div>
    <div class="row input-field">
      <select id="birthday-month" class="form-select">
        <option value="{{ birth_month }}" selected>{{ birth_month }}</option>
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
        <option value="April">April</option>
        <option value="May">May</option>
        <option value="June">June</option>
        <option value="July">July</option>
        <option value="August">August</option>
        <option value="September">September</option>
        <option value="October">October</option>
        <option value="November">November</option>
        <option value="December">December</option>
      </select>
      <input
        type="number"
        id="birthday-day"
        class="form-control col-md-3"
        placeholder="Day"
        value="{{ birth_day }}"
      />
      <input
        type="number"
        id="birthday-year"
        class="form-control col-md-3"
        placeholder="Year"
        value="{{ birth_year }}"
      />
      <div id="birthday-error" class="error-msg"></div>
    </div>
    <div class="row input-field">
      <label for="birthplace">Birthplace:</label>
    </div>
    <div class="row input-field">
      <input
        type="text"
        id="birthplace"
        name="birthplace"
        value="{{ skater.birthplace }}"
      />
      <div id="birthplace-error" class="error-msg"></div>
    </div>
  </div>

  <div class="col-md-6 form">
    <div class="row title subtitle txt">Competition history (optional)</div>

    <!-- Olympic Results -->
    <div class="row input-field">
      <label>Olympic Games Results:</label>
    </div>
    <div class="row input-field">
      <div class="row" id="olympics-results">
        <div class="col-md-12" id="olympics-results-submitted">
          {% for result in skater.results.olympics %}
          <div class="row col-md-12" data-index="{{ loop.index }}">
            Rank: {{ result.rank }}, Year: {{ result.year }}
            <button
              class="delete-btn btn lg white-txt"
              data-type="olympics"
              data-index="{{ loop.index }}"
            >
              X
            </button>
          </div>
          {% endfor %}
        </div>
        <div class="col-md-12 result">
          <input type="number" name="olympics-rank" placeholder="Rank" />
          <input type="number" name="olympics-year" placeholder="Year" />
        </div>
      </div>
      <div id="olympics-error" class="error-msg" style="display: none"></div>
    </div>
    <div class="row">
      <button class="btn lg white-txt" id="add-olympics">
        Add Olympic Games Result
      </button>
    </div>

    <!-- World Championship Results -->
    <div class="row input-field">
      <label>World Championship Results:</label>
    </div>
    <div class="row input-field">
      <div class="row" id="worlds-results">
        <div class="col-md-12" id="worlds-results-submitted">
          {% for result in skater.results.worlds %}
          <div class="row col-md-12" data-index="{{ loop.index }}">
            Rank: {{ result.rank }}, Year: {{ result.year }}
            <button
              class="delete-btn btn lg white-txt"
              data-type="worlds"
              data-index="{{ loop.index }}"
            >
              X
            </button>
          </div>
          {% endfor %}
        </div>
        <div class="col-md-12 result">
          <input type="number" name="worlds-rank" placeholder="Rank" />
          <input type="number" name="worlds-year" placeholder="Year" />
        </div>
      </div>
      <div id="worlds-error" class="error-msg" style="display: none"></div>
    </div>
    <div class="row">
      <button class="btn lg white-txt" id="add-worlds">
        Add World Championship Result
      </button>
    </div>

    <!-- Grand Prix Final Results -->
    <div class="row input-field">
      <label>Grand Prix Final Results:</label>
    </div>
    <div class="row input-field">
      <div class="row" id="gpf-results">
        <div class="col-md-12" id="gpf-results-submitted">
          {% for result in skater.results.gpf %}
          <div class="row col-md-12" data-index="{{ loop.index }}">
            Rank: {{ result.rank }}, Year: {{ result.year }}
            <button
              class="delete-btn btn lg white-txt"
              data-type="gpf"
              data-index="{{ loop.index }}"
            >
              X
            </button>
          </div>
          {% endfor %}
        </div>
        <div class="col-md-12 result">
          <input type="number" name="gpf-rank" placeholder="Rank" />
          <input type="number" name="gpf-year" placeholder="Year" />
        </div>
      </div>
      <div id="gpf-error" class="error-msg" style="display: none"></div>
    </div>
    <div class="row">
      <button class="btn lg white-txt" id="add-gpf">
        Add Grand Prix Final Result
      </button>
    </div>
  </div>
</div>

<div class="row txt">
  <button
    class="col-md-4 btn accent white-txt mx-auto btn-margin"
    id="edit-btn"
  >
    Submit edits
  </button>
  <button class="col-md-4 btn lg white-txt mx-auto btn-margin" id="discard-btn">
    Discard changes
  </button>
</div>
<script>
  var id = {{skater.id|tojson}}
  var results = {{skater.results|tojson}}
  var olympics = results.olympics
  var worlds = results.worlds
  var gpf = results.gpf
</script>
<script
  type="text/javascript"
  src="{{ url_for('static', filename = 'add.js') }}"
></script>
{% endblock %}
